import{g as N,h as O,j as B,i as P,r as d,z as x,l as $,c as m,b as s,w as n,m as F,q as L,o as _,d as C,t as u,s as f,a as b,F as q,x as D}from"./BIGTx159.js";import{_ as U}from"./D4RFHIB0.js";import{_ as z}from"./Bp4sluqu.js";import{_ as V}from"./HP8kYozx.js";import{u as M}from"./BHWQDBbF.js";import{a as G}from"./B_SY6CCR.js";import{u as H}from"./CKSCHTHe.js";import"./9iOrXdcA.js";import"./4eBO4NMG.js";import"./D0BGaoLT.js";const K={class:""},Q={class:"text-xl font-semibold leading-tight text-gray-900 dark:text-white"},W={class:"grid grid-cols-3 gap-4"},le={__name:"index",setup(X){const{t:i}=N(),T=H();O();const y=B(),p=P(),R=M(),g=d({column:"id",direction:"asc"}),v=[{key:"id",label:"#",sortable:!0},{key:"title",label:i("TITLE"),sortable:!0},{key:"description",label:i("DESCRIPTION"),sortable:!1},{key:"create_dates",label:i("CREATED_AT"),sortable:!0},{key:"actions",label:i("ACTIONS"),sortable:!1}],w=d(v),E=x(()=>v.filter(e=>w.value.includes(e))),r=d(!1),h=d([]);x(()=>JSON.parse(localStorage.getItem("user"))),$(()=>{k()});const J=async e=>{try{r.value=!0,await T.deleteJob(e,i,R),k()}catch(o){console.error(i("JOB_DELETED_ERROR")+":",o)}finally{r.value=!1}},S=e=>{const o=y({name:"company-id-jobs-jobid-edit",params:{id:p.params.id,jobid:e}});o&&o.fullPath?f(o.fullPath):console.error("Failed to generate route",o)},I=e=>{const o=y({name:"company-id-jobs-jobid-applications",params:{id:p.params.id,jobid:e}});o&&o.fullPath?f(o.fullPath):console.error("Failed to generate route",o)},k=async()=>{try{r.value=!0;const e=await G(`/companies/${p.params.id}`,{});h.value=e.data.jobs}catch(e){console.error(i("ERROR_FETCHING_COMPANIES")+":",e)}finally{r.value=!1}};return(e,o)=>{const l=L,c=U,j=z,A=V;return _(),m("div",K,[s(l,{onClick:o[0]||(o[0]=t=>("navigateTo"in e?e.navigateTo:F(f))(e.localePath({name:"company-list"}))),color:"indigo",variant:"outline",icon:"i-heroicons-arrow-left",class:"mt-8"},{default:n(()=>[C(u(e.$t("BACK")),1)]),_:1}),s(A,{class:"w-full",ui:{base:"",ring:"",divide:"divide-y divide-gray-200 dark:divide-gray-700",header:{padding:"px-4 py-5"},body:{padding:"",base:"divide-y divide-gray-200 dark:divide-gray-700"},footer:{padding:"p-4"}}},{header:n(()=>[b("h2",Q,u(e.$t("JOBS_LIST")),1)]),default:n(()=>[s(j,{sort:g.value,"onUpdate:sort":o[1]||(o[1]=t=>g.value=t),rows:h.value,columns:E.value,loading:r.value,"sort-asc-icon":"i-heroicons-arrow-up","sort-desc-icon":"i-heroicons-arrow-down","sort-mode":"manual",class:"w-full",ui:{td:{base:"max-w-[0] truncate"},default:{checkbox:{color:"indigo"}}}},{"location-data":n(({row:t})=>[(_(!0),m(q,null,D(t.location,a=>(_(),m("div",{key:a.id},[s(c,{text:a.country+","+a.state+","+a.city},{default:n(()=>[b("span",null,u(a.country+","+a.state+","+a.city),1)]),_:2},1032,["text"])]))),128))]),"create_dates-data":n(({row:t})=>[C(u(t.create_dates.created_at_human),1)]),"actions-data":n(({row:t})=>[b("div",W,[s(c,{text:"Applicants"},{default:n(()=>[s(l,{icon:"i-heroicons-briefcase",size:"2xs",color:"indigo",variant:"outline",ui:{rounded:"rounded-full"},onClick:a=>I(t.id),square:""},null,8,["onClick"])]),_:2},1024),s(c,{text:"Edit Job"},{default:n(()=>[s(l,{icon:"i-heroicons-pencil-square",size:"2xs",color:"orange",variant:"outline",ui:{rounded:"rounded-full"},onClick:a=>S(t.id),square:""},null,8,["onClick"])]),_:2},1024),s(c,{text:"Remove Job"},{default:n(()=>[s(l,{icon:"i-heroicons-trash",size:"2xs",color:"red",variant:"outline",ui:{rounded:"rounded-full"},onClick:a=>J(t.id),square:""},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["sort","rows","columns","loading"])]),_:1})])}}};export{le as default};
