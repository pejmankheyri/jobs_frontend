import{g as J,h as F,i as L,j,r as m,k as G,l as H,c as v,b as n,w as l,m as g,a as i,t as r,n as $,q as O,o as c,d as b,s as q,B as K,F as P,x as Q}from"./iOswF-Mh.js";import{_ as M}from"./sYhRiMdw.js";import{_ as W}from"./CYOGlz8x.js";import{_ as z,a as X}from"./Dbn4O9lr.js";import{_ as Y}from"./DZH-hkGO.js";import{_ as Z}from"./DZ6vkysk.js";import{_ as oo}from"./BSc-RuOm.js";import{u as eo}from"./BtQnnGFf.js";import{c as to,a as V}from"./BqjAheMm.js";import{u as ao}from"./DHnsghR8.js";import"./DLKrJgIg.js";import"./ClcGhuih.js";import"./DAxEYscs.js";const no={class:"container max-w-md mx-auto my-10"},so={class:"mb-4 text-2xl font-bold"},lo={class:"mt-4"},io={class:"mb-2"},ro={class:"grid grid-cols-2 gap-2"},co={class:"pt-4"},Vo={__name:"edit",setup(mo){const{t:u}=J(),T=ao();F();const d=L(),k=j(),U=eo(),_=m(!1),p=m(!1),s=m([]),f=m(""),y=to({title:V().required(u("THIS_FIELD_IS_REQUIRED")),description:V().required(u("THIS_FIELD_IS_REQUIRED"))}),t=G({title:"",description:"",tags:""}),E=async()=>{if(y.validateSync(t))try{_.value=!0,t.tags=s.value.map(o=>o.name),await T.editJob(t,d.params.jobid,u,k,U)}finally{_.value=!1}},B=async()=>{try{p.value=!0;const o=await T.getJob(d.params.jobid);t.title=o.title,t.description=o.description,s.value=o.tags}finally{p.value=!1}},D=o=>{s.value.find(e=>e.title===o.target.value)||(s.value.push({id:o.target.value.id,name:o.target.value}),f.value="")},w=o=>{s.value=s.value.filter(e=>e.id!==o.id),E()};return H(()=>{B()}),(o,e)=>{const h=O,x=M,S=W,I=X,C=Y,R=Z,A=oo,N=z;return c(),v("div",no,[n(h,{onClick:e[0]||(e[0]=a=>("navigateTo"in o?o.navigateTo:g(q))(o.localePath({name:"company-id-jobs",params:{id:g(d).params.id}}))),color:"indigo",variant:"outline",icon:"i-heroicons-arrow-left",class:"mb-4"},{default:l(()=>[b(r(o.$t("BACK")),1)]),_:1}),i("h1",so,r(o.$t("EDIT_JOB")),1),p.value?(c(),$(x,{key:0,class:"h-[100px] w-full mb-auto mt-16"})):(c(),$(N,{key:1,schema:g(y),state:t,class:"space-y-4",onSubmit:E},{default:l(()=>[n(I,{label:o.$t("JOB_TITLE"),name:"title"},{default:l(()=>[n(S,{modelValue:t.title,"onUpdate:modelValue":e[1]||(e[1]=a=>t.title=a),icon:"i-heroicons-briefcase",color:"indigo"},null,8,["modelValue"])]),_:1},8,["label"]),n(I,{label:o.$t("JOB_DESCRIPTION"),name:"description"},{default:l(()=>[n(C,{modelValue:t.description,"onUpdate:modelValue":e[2]||(e[2]=a=>t.description=a),icon:"i-heroicons-document-text",color:"indigo"},null,8,["modelValue"])]),_:1},8,["label"]),n(S,{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=a=>f.value=a),icon:"i-heroicons-tag",color:"indigo",onKeydown:K(D,["enter"]),placeholder:o.$t("ADD_NEW_TAG_AND_HIT_ENTER")},null,8,["modelValue","placeholder"]),i("div",lo,[i("h2",io,r(o.$t("SELECTED_TAGS"))+":",1),i("ul",ro,[(c(!0),v(P,null,Q(s.value,a=>(c(),v("li",{key:a.id},[n(A,{variant:"subtle",color:"indigo",class:"cursor-pointer",onClick:uo=>w(a)},{default:l(()=>[n(R),b(r(a.name),1)]),_:2},1032,["onClick"])]))),128))])]),i("div",co,[n(h,{type:"submit",color:"indigo",loading:_.value,block:""},{default:l(()=>[b(r(o.$t("SAVE_CHANGES")),1)]),_:1},8,["loading"])])]),_:1},8,["schema","state"]))])}}};export{Vo as default};
